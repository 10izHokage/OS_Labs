# Лабораторная №5

## Структура проекта

**1.** CMakeLists.txt — скрипт сборки проекта

**2.** src/server.cpp — сервер (приём температуры, БД, HTTP API, веб-сервер)

**3.** src/client.cpp — симулятор датчика температуры

**4.** src/serial_port.h — интерфейс получения данных

**5.** src/serial_port_win.cpp — реализация для Windows

**6.** src/serial_port_posix.cpp — реализация для Linux/macOS

**7.** src/db.h / db.cpp — работа с базой данных SQLite

**8.** web/index.html — веб-интерфейс

**9.** web/script.js — логика графиков и запросов к серверу

**10.** web/style.css — стили

**11.** scripts/build.sh — сборка для Linux/macOS

**12.** scripts/build.cmd — сборка для Windows

**13.**  data/temperature.db — база данных

**14.** hour.png, 7day.png — скриншоты работы веб-интерфейса

## server.cpp

- получает температуру от устройства через serial_port

- сохраняет каждое измерение в базу данных SQLite

- предоставляет HTTP API:

`/current` — текущая температура

`/hourly` — средние значения за последний час

`/daily` — средние значения за последние 7 дней

- раздаёт веб-страницу и статические файлы (HTML/JS/CSS) 

## client.cpp

- раз в секунду генерирует температуру (20–30 °C)  

- отправляет её по UDP на сервер

- используется для проверки работы системы

## Веб-часть

Веб-интерфейс открывается по адресу: `http://localhost:8080`

Отображает:

- текущую температуру

- график изменения температуры

- переключение между режимами Hourly и Daily

- автоматическое обновление данных

## Как тестировалась программа

Для проверки без ожидания часов и суток использовался **ускоренный тестовый режим**:

- отправка температуры происходила чаще (уменьшен интервал отправки у клиента)

- режим Hourly (в обычной версии — за последний час) в тесте работал как данные за последние минуты

- режим Daily (в обычной версии — за последние 7 дней) в тесте отображал данные за последние часы

- графики в веб-интерфейсе обновлялись каждую секунду



# Лабораторная №4

## Структура проекта

**1.** `CMakeLists.txt` — CMake-скрипт сборки проекта  

**2.** `src/server.cpp` — основная программа (мониторинг температуры и логирование)  

**3.** `src/client.cpp` — симулятор устройства (генерация температуры для проверки)  

**4.** `src/serial_port.h` — интерфейс чтения данных (температуры)  

**5.** `src/serial_port_win.cpp` — реализация чтения для Windows  

**6.** `src/serial_port_posix.cpp` — реализация чтения для Unix/POSIX  

**7.** `scripts/build.sh` — скрипт сборки для Linux/macOS/WSL  

**8.** `scripts/build.cmd` — скрипт сборки для Windows  

**9.** `data/` — папка для лог-файлов (пример для Windows)  

### `server.cpp`

**-** получает данные о температуре от устройства
**-** записывает каждое измерение температуры в файл `data/measurements.log`
**-** хранит в этом файле только измерения за последние 24 часа
**-** один раз в час вычисляет среднюю температуру за час и записывает её в файл `data/hourly_avg.log`
**-** хранит в файле со средними часовыми значениями данные только за последний месяц
**-** один раз в сутки вычисляет среднюю температуру за день и записывает её в файл `data/daily_avg.log`
**-** файл со средней дневной температурой накапливает данные за текущий год

### `client.cpp`

Имитирует работу температурного устройства:
**-** периодически (например, раз в секунду) генерирует значение температуры
**-** передаёт сгенерированное значение основной программе (`server.cpp`)
**-** используется только для тестирования и демонстрации работы системы

### Как тестировалось

Чтобы быстро проверить, что данные правильно обрезаются и записываются в нужные файлы были изменены временные параметры, чтобы проверка работала быстрее

**-** Обрезка данных за 24 часа настроена на 60 секунд. Это ускоряет удаление старых данных в файле measurements.log

**-** Средняя температура за час записывалась в файл hourly_avg.log каждую минуту

**-** Средняя температура за день записывалась в файл daily_avg.log сразу после каждого нового измерения

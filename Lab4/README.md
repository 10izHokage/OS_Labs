# Лабораторная №4

## Структура проекта

**1.** `CMakeLists.txt` — CMake-скрипт сборки проекта  

**2.** `src/server.cpp` — основная программа (мониторинг температуры и логирование)  

**3.** `src/client.cpp` — симулятор устройства (генерация температуры для проверки)  

**4.** `src/serial_port.h` — интерфейс чтения данных (температуры)  

**5.** `src/serial_port_win.cpp` — реализация чтения для Windows  

**6.** `src/serial_port_posix.cpp` — реализация чтения для Unix/POSIX  

**7.** `scripts/build.sh` — скрипт сборки для Linux/macOS/WSL  

**8.** `scripts/build.cmd` — скрипт сборки для Windows  

**9.** `data/` — папка для лог-файлов (пример для Windows)  

## server.cpp

- получает температуру от устройства через модуль `serial_port`
- записывает каждое измерение в `data/measurements.log` (хранятся только данные за последние 24 часа)
- раз в час считает среднюю температуру за час и пишет ее в `data/hourly_avg.log` (хранит данные только за последний месяц)
- раз в сутки считает среднюю температуру за день и пишет ее в `data/daily_avg.log` (хранит данные только за текущий год)  

## client.cpp

- раз в секунду генерирует температуру (20–30 °C)  
- отправляет её по UDP на указанный IP и порт  
- используется для проверки работы системы


## Как тестировалась программа

Для проверки без ожидания часов и суток использовался **ускоренный тестовый режим**:

- вместо хранения данных за 24 часа — использовался интервал в минуты  
- средняя “за час” считалась чаще  
- средняя “за день” также рассчитывалась быстрее  
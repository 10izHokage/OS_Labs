# Лабораторная №3

## Структура проекта

**1.** `CMakeLists.txt` — CMake-скрипт сборки проекта  

**2.** `main.cpp` — основная программа, реализующая работу с процессами, потоками и разделяемой памятью  

**3.** `my_shmem.hpp` — кроссплатформенный класс для работы с разделяемой памятью и именованными семафорами (Windows / POSIX)  

**4.** `scripts/build.sh` — скрипт сборки для Linux 

**5.** `scripts/build.cmd` — скрипт сборки для Windows  

**6.** `log.txt` — файл журнала, содержащий результат работы программы (пример для Windows)

## Функциональность программы main.cpp 

**-** при запуске процесс записывает в лог свой PID и время старта  

**-** каждый процесс увеличивает общий счётчик на 1 каждые 300 мс  

**-** пользователь может задать произвольное значение счётчика через стандартный ввод  

**-** один из процессов автоматически выбирается как *master* и раз в 1 секунду записывает в лог текущее время, PID и значение счётчика  

**-** *master*-процесс раз в 3 секунды запускает две копии программы:
  - **copy1** — увеличивает значение счётчика на 10 и завершает работу  
  - **copy2** — увеличивает значение счётчика в 2 раза, через 2 секунды уменьшает его в 2 раза и завершает работу  

**-** если копия ещё не завершила работу, повторный запуск не выполняется  

**-** при завершении *master*-процесса происходит автоматический выбор нового *master*  

